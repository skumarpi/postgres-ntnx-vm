app:
  name: Postgress NTNX VM
  code: POSTGRESNTNXDBVM
  notify: skumar@ecloudcontrol.com

build:
  version: 2.9
  env: DEV
  build_file: none
  output_files: output/*.zip
  image_template: ansible-2.9

deploy:
  context: skumarpi/DEV
  replicas: 1

properties:
# AppZ Ansible Playbook
  APPZ_PLAYLIST: nutanix_vm,centos_base,postgres
  
# Nutanix AHV Environment properties
  NUTANIX_PRISM_ADDRESS: c0a83da5.lowtouch.cloud
  NUTANIX_PRISM_PORT: 9440
  NUTANIX_PRISM_CLUSTER_NAME: CLOUDCONTROL
  NUTANIX_VM_SUBNET_NAME: DefaultNet
  NUTANIX_PRISM_USER_NAME: admin
  NUTANIX_PRISM_USER_PASSWORD:
    vault: NUTANIX_VM_PROVIDER_USER_PASSWORD
    
# Ntuanix VM Properties
  NUTANIX_VM_ROOT_DISK_SIZE: 102400
  NUTANIX_VM_DATA_DISK_SIZE: 102400
  NUTANIX_VM_INVENTORY_HOST: postgres
  NUTANIX_VM_NAME: sk_postgres
  NUTANIX_VM_RAM: 8192
  NUTANIX_VM_CPU_PER_SOCKET: 4
  NUTANIX_VM_CPU_SOCKET: 1
  NUTANIX_VM_IMAGE: centos7-v3.vmdk 
  NUTANIX_VM_DOMIAN: localhost
  NUTANIX_VM_ANSIBLE_USER_NAME: appz
  NUTANIX_VM_ANSIBLE_PUB_KEY:
    vault: NUTANIX_VM_ANSIBLE_PUB_KEY
  NUTANIX_VM_ANSIBLE_KEY:
    vault: NUTANIX_VM_ANSIBLE_KEY
  NUTANIX_VM_ROOT_PASSWORD: 
    vault: NUTANIX_VM_ROOT_PASSWORD
  NUTANIX_VM_HOSTNAME: localhost

# Centos Base properties  
  CENTOS_BASE_HOSTNAME: tomcat
  CENTOS_BASE_FLUENT_AGGREGATOR_HOST: 192.168.61.193
  CENTOS_BASE_FLUENT_AGGREGATOR_PORT: 31212

# Postgres DB properties  
  POSTGRES_HOSTNAME: postgres
  POSTGRES_FLUENT_AGGREGATOR_HOST: 192.168.61.193
  POSTGRES_FLUENT_AGGREGATOR_PORT: 31212
  POSTGRESQL_PASSWORD: 
    vault: POSTGRES_DBPASS
  POSTGRESQL_CONNECTUSER: postgres
  POSTGRESQL_CONNECTIONDB: postgres
  POSTGRESQL_PORT: 5432
  POSTGRES_SPRINGBOOTWEB_PASSWORD:
    vault: POSTGRES_SPRINGBOOTWEB_PASSWORD
  
# common properties  
  APPZ_TEARDOWN_TOKEN: 20210421-0350
  revision : 06
